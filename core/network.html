<html>
<head>
<script src="http://js.cytoscape.org/js/cytoscape.min.js"></script>
<style>
#cy {
  height: 100%;
  width: 100%;
  position: absolute;
  left: 0;
  top: 0;
}
</style>
</head>
<body>
  <div id="cy"></div>
</body>

<script>
cytoscape({
  container: document.getElementById('cy'),

  layout: {
    name: '{{layout}}',
    padding: 10
  },

  style: cytoscape.stylesheet()
    .selector('node')
      .css({
//        'shape': 'data(faveShape)',
        'content': 'data(name)',
        'text-valign': 'center',
        'text-outline-width': 1,
//        'text-outline-color': 'data(faveColor)',
//        'background-color': 'data(faveColor)',
        'color': '#fff',
      })
    .selector('node.task')
      .css({
        'width': 'mapData({{size}}, {{min_size}}, {{max_size}}, 20, 120)',
        'height': 'mapData({{size}}, {{min_size}}, {{max_size}}, 20, 120)',
        {{task_status}}
      })
    .selector('node.app')
      .css({
        'text-valign': 'bottom',
        {{app_status}}
      })
    .selector('node.module')
      .css({
        'text-valign': 'top',
        'bordker-opacity': 0,
        {{module_status}}
      })
    .selector(':selected')
      .css({
        'border-width': 2,
//        'border-color': '#333'
      })
    .selector('edge')
      .css({
        'curve-style': 'bezier',
        'opacity': 0.666,
//        'width': 'mapData(strength, 70, 100, 2, 6)',
        'target-arrow-shape': 'triangle',
//        'source-arrow-shape': 'circle'
//        'line-color': 'data(faveColor)',
//        'source-arrow-color': 'data(faveColor)',
//        'target-arrow-color': 'data(faveColor)'
      })
    .selector('edge.questionable')
      .css({
        'line-style': 'dotted',
        'target-arrow-shape': 'diamond'
      })
    .selector('.faded')
      .css({
        'opacity': 0.25,
        'text-opacity': 0
      }),

  elements: {
    nodes: {{nodes}},
    edges: {{edges}}
  },

  ready: function(){
    window.cy = this;
  }
});

</script>
</html>
